apiVersion: apps/v1
kind: Deployment
metadata:
  name: ch-devops
  namespace: ch
  labels:
    app: ch-devops
  annotations:
    kubesphere.io/creator: zhimin
spec:
  replicas: 1
  selector:
    matchLabels:
      app: ch-devops
  template:
    metadata:
      labels:
        app: ch-devops
    spec:
      containers:
        - name: container-ncrbja
          image: 'registry.kubeoperator.io:8082/ch/ch-devops:${DATETIME}'
          ports:
            - name: tcp-8080
              containerPort: 8080
              protocol: TCP
          env:
            - name: JAVA_OPTS
              value: >-
                -Dnacos.config.server-addr=nacos.public.svc.cluster.local:8848
                -Dnacos.config.namespace=ff29ab57-4f4c-4c7a-8c96-d8ad70459d50
      imagePullSecrets:
        - name: ch-nexus