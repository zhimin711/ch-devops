plugins {
    id 'org.springframework.boot' version '2.1.5.RELEASE'
    id 'java'
}
apply plugin: 'io.spring.dependency-management'
//apply from: 'buildApi.gradle'
//apply from: 'mybatisGenerator.gradle'

group 'com.ch.cloud'
version '1.0.0-SNAPSHOT'


sourceCompatibility = 1.8
targetCompatibility = 1.8

ext {
//	springCloudVersion = 'Edgware.RELEASE' //Greenwich.RC1\Finchley.SR2\Edgware.SR5\Camden.SR3
    springCloudVersion = 'Greenwich.RELEASE'
    springOauth2 = '2.3.4.RELEASE'
    alicloudVersion = '0.9.0.RELEASE' //0.2.1.RELEASE,0.9.0.RELEASE
    chVersion = '1.0.3-SNAPSHOT' //0.2.1.RELEASE
}
configurations {
    compileOnly {
        extendsFrom annotationProcessor
    }
}

repositories {
    mavenLocal()
//    maven { url "http://nexus.sf-express.com/nexus/content/groups/public/" }
    jcenter()
    mavenCentral()
    maven { url "https://repo.spring.io/milestone" }
}

dependencies {

    //私有相关包
    implementation("com.ch:ch-core:${chVersion}")
//    implementation("com.ch:ch-helper:${chVersion}")
    implementation("com.ch:ch-mybatis:${chVersion}")

    //spring boot相关包
    implementation 'org.springframework.boot:spring-boot-starter'
    implementation 'org.springframework.boot:spring-boot-starter-web', {
        exclude group: 'org.springframework.boot', module: 'spring-boot-starter-tomcat'
    }

//    implementation 'org.springframework.boot:spring-boot-starter-thymeleaf'
    implementation 'org.springframework.boot:spring-boot-starter-jetty'
//    implementation 'org.springframework.boot:spring-boot-starter-redis'

    //数据源相关包
    implementation 'org.mybatis.spring.boot:mybatis-spring-boot-starter:1.1.1'
    implementation "mysql:mysql-connector-java:5.1.30"


//     https://mvnrepository.com/artifact/org.apache.kafka/kafka-clients
    implementation 'org.apache.kafka:kafka-clients:0.8.2.0', {
        exclude group: 'log4j', module: 'log4j'
        exclude group: 'org.slf4j'
    }
//    implementation group: 'org.apache.kafka', name: 'kafka-clients', version: '2.0.0'

    // https://mvnrepository.com/artifact/org.apache.kafka/kafka
    implementation group: 'org.apache.kafka', name: 'kafka_2.11', version: '0.8.2.0', {
        exclude group: 'log4j', module: 'log4j'
        exclude group: 'org.slf4j'
    }
    compile 'io.springfox:springfox-swagger2:2.8.0'
    compile 'com.github.xiaoymin:swagger-bootstrap-ui:1.9.1'
    // https://mvnrepository.com/artifact/org.springframework.kafka/spring-kafka
//    implementation('org.springframework.kafka:spring-kafka:2+')

    // https://mvnrepository.com/artifact/commons-io/commons-io
    implementation group: 'commons-io', name: 'commons-io', version: '2.6'

    /* dubbo service jar end*/
    // https://mvnrepository.com/artifact/io.protostuff/protostuff-core
    implementation group: 'io.protostuff', name: 'protostuff-core', version: '1.6.0'
    // https://mvnrepository.com/artifact/io.protostuff/protostuff-runtime
    implementation group: 'io.protostuff', name: 'protostuff-runtime', version: '1.6.0'
    //win系统会导致Controller与Service层实例不一致
    runtimeOnly('org.springframework.boot:spring-boot-devtools')
    testImplementation 'org.springframework.boot:spring-boot-starter-test'
    annotationProcessor 'org.projectlombok:lombok'

//    implementation 'org.springframework.cloud:spring-cloud-starter-config'
    implementation "org.springframework.cloud:spring-cloud-starter-alibaba-nacos-config:${alicloudVersion}"
    implementation "org.springframework.cloud:spring-cloud-starter-alibaba-nacos-discovery:${alicloudVersion}"
    implementation "org.springframework.cloud:spring-cloud-starter-alibaba-sentinel:${alicloudVersion}"
}

dependencyManagement {
    imports {
        mavenBom "org.springframework.cloud:spring-cloud-dependencies:${springCloudVersion}"
    }
}
